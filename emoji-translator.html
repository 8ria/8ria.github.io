<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Translator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #000000;
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .back-btn {
            background: none;
            border: 1px solid #333;
            color: #888;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            margin-bottom: 3rem;
        }

        .back-btn:hover {
            border-color: #555;
            color: #fff;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 3rem;
            text-align: center;
            letter-spacing: -0.02em;
        }

        .emoji-translator {
            background: #111111;
            border: 1px solid #222;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 4rem;
        }

        #loading {
            text-align: center;
        }

        .translator-title {
            font-size: 1.2rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: #ccc;
        }

        .progress {
            width: 100%;
            height: 2px;
            background: #222;
            border-radius: 1px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-bar {
            height: 100%;
            background: #ffffff;
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-text {
            font-size: 0.9rem;
            color: #888;
            margin-top: 1rem;
        }

        #translator {
            display: none;
        }

        .input-group {
            margin-bottom: 2rem;
        }

        label {
            display: block;
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 0.5rem;
            font-weight: 400;
        }

        textarea {
            width: 100%;
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 1rem;
            color: #fff;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.2s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #555;
        }

        textarea::placeholder {
            color: #666;
        }

        .translate-btn {
            width: 100%;
            background: #ffffff;
            color: #000;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 2rem;
        }

        .translate-btn:hover {
            background: #f0f0f0;
            transform: translateY(-1px);
        }

        .translate-btn:active {
            transform: translateY(0);
        }

        #output {
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 1rem;
            font-size: 1.5rem;
            min-height: 3rem;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .blog-content {
            color: #ccc;
            max-width: none;
        }

        .blog-content h2 {
            font-size: 1.5rem;
            font-weight: 400;
            margin: 3rem 0 1rem 0;
            color: #fff;
            border-bottom: 1px solid #222;
            padding-bottom: 0.5rem;
        }

        .blog-content p {
            margin-bottom: 1.5rem;
            color: #aaa;
        }

        .blog-content a {
            color: #fff;
            text-decoration: none;
            border-bottom: 1px solid #333;
            transition: border-color 0.2s ease;
        }

        .blog-content a:hover {
            border-color: #fff;
        }

        .blog-content ol, .blog-content ul {
            margin: 1rem 0 1.5rem 1.5rem;
            color: #aaa;
        }

        .blog-content li {
            margin-bottom: 0.5rem;
        }

        .blog-content strong {
            color: #fff;
            font-weight: 500;
        }

        .blog-content pre {
            background: #0a0a0a;
            border: 1px solid #222;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .blog-content code {
            background: #0a0a0a;
            padding: 0.2rem 0.4rem;
            border-radius: 2px;
            font-size: 0.9rem;
            color: #ddd;
        }

        .blog-content pre code {
            background: none;
            padding: 0;
        }

        .emoji {
            font-style: normal;
            margin-right: 0.5rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
            
            .emoji-translator {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-btn" onclick="window.location.href='index.html'">‚Üê Back to Posts</button>

        <h1>Emoji Translator</h1>

        <div class="emoji-translator">
            <div id="loading">
                <div class="translator-title">Loading Emoji Translator...</div>
                <div class="progress">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <div class="status-text">Loading language models and emoji data...</div>
            </div>

            <div id="translator">                
                <div class="input-group">
                    <label for="input-text">Enter your text</label>
                    <textarea id="input-text" rows="4" placeholder="Type something like 'I love programming and coffee'..."></textarea>
                </div>

                <button id="translate-btn" class="translate-btn">Translate to Emojis</button>

                <div class="input-group">
                    <div id="output">Your translated emojis will appear here...</div>
                </div>

                <div class="status-text">
                    Tip: Press Ctrl+Enter to translate quickly
                </div>
            </div>
        </div>

        <div class="blog-content">
            <p>A web application that uses WebAssembly (Wasm) and word embeddings to translate regular text into relevant emojis. The translator finds semantic connections between your words and emoji keywords using GloVe (Global Vectors for Word Representation) embeddings.</p>

            <p>Try it live at: <a href="https://and-ria.github.io/Emoji-Translator" target="_blank">https://and-ria.github.io/Emoji-Translator</a></p>

            <h2><span class="emoji">üß†</span> How It Works</h2>

            <p>This application uses natural language processing techniques to find semantic similarities between input text and emoji keywords:</p>

            <ol>
                <li><strong>Word Embeddings</strong>: Uses GloVe word embeddings to convert words into vectors in a high-dimensional space where similar words are positioned closer together</li>
                <li><strong>Cosine Similarity</strong>: Calculates the semantic similarity between input words and emoji keywords</li>
                <li><strong>WebAssembly</strong>: Leverages Rust compiled to WebAssembly for efficient text processing and vector calculations</li>
                <li><strong>Web Frontend</strong>: Provides a simple, clean interface for entering text and displaying emoji translations</li>
            </ol>

            <h2><span class="emoji">üõ†Ô∏è</span> Technical Stack</h2>

            <ul>
                <li><strong>Rust</strong>: Core translation logic and vector similarity calculations</li>
                <li><strong>WebAssembly</strong>: Compiles Rust code for browser execution</li>
                <li><strong>JavaScript</strong>: Glues everything together and handles the UI interaction</li>
                <li><strong>HTML/CSS</strong>: Simple and responsive user interface</li>
            </ul>

            <h2><span class="emoji">üì¶</span> Project Structure</h2>

            <pre><code>Emoji-Translator/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ lib.rs           # Rust code for the translator
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ emoji.json       # Emoji to keywords mapping (from emojilib)
‚îÇ   ‚îî‚îÄ‚îÄ glove.txt        # GloVe word embeddings
‚îú‚îÄ‚îÄ Cargo.toml           # Rust package configuration
‚îú‚îÄ‚îÄ build.sh            # Build script
‚îú‚îÄ‚îÄ emoji_site.js       # Generated JavaScript bindings
‚îú‚îÄ‚îÄ emoji_site_bg.wasm  # Compiled WebAssembly module
‚îî‚îÄ‚îÄ index.html          # Web UI</code></pre>

            <h2><span class="emoji">üöÄ</span> Getting Started</h2>

            <h3>Prerequisites</h3>

            <ul>
                <li><a href="https://www.rust-lang.org/tools/install" target="_blank">Rust</a> and Cargo</li>
                <li><a href="https://rustwasm.github.io/wasm-pack/installer/" target="_blank">wasm-pack</a></li>
            </ul>

            <h3>Setup</h3>

            <ol>
                <li>Clone this repository:
                    <pre><code>git clone https://github.com/and-ria/Emoji-Translator.git
cd Emoji-Translator</code></pre>
                </li>
                <li>Download the required data files:
                    <p>You'll need:</p>
                    <ul>
                        <li><code>glove.txt</code>: A subset of GloVe word embeddings (we recommend the 50-dimensional version)</li>
                        <li><code>emoji.json</code>: Get this from <a href="https://github.com/muan/emojilib" target="_blank">emojilib</a> (<code>emoji.json</code> file)</li>
                    </ul>
                    <p>Place these files in the <code>static/</code> directory.</p>
                </li>
                <li>Build the project:
                    <pre><code>./build.sh</code></pre>
                </li>
                <li>Serve the directory with a local web server:
                    <pre><code>python -m http.server
# or any other web server of your choice</code></pre>
                </li>
                <li>Open your browser and navigate to <code>http://localhost:8000</code></li>
            </ol>

            <h2><span class="emoji">üìã</span> Usage</h2>

            <ol>
                <li>Wait for the application to initialize (it will load the word embeddings and emoji data)</li>
                <li>Type or paste your text in the input box</li>
                <li>Click "Translate" (or press Ctrl+Enter)</li>
                <li>View your emoji translation!</li>
            </ol>

            <h2><span class="emoji">üìù</span> Data Files</h2>

            <h3>emoji.json</h3>

            <p>This project uses <a href="https://github.com/muan/emojilib" target="_blank">emojilib</a> for emoji data. It's a JSON file mapping emoji characters to arrays of related keywords:</p>

            <pre><code>{
  "üòó": [
    "kissing_face",
    "love",
    "like",
    "face",
    "kiss",
    "duck",
    "kissy",
    "whistling"
  ],
  "‚ò∫Ô∏è": [
    "smiling_face",
    "face",
    "blush",
    "happiness",
    "happy",
    "smile",
    "smiley"
  ]
}</code></pre>

            <h3>glove.txt</h3>

            <p>A text file containing word embeddings, where each line has a word followed by its vector representation:</p>

            <pre><code>the 0.418 0.24968 -0.41242 0.1217 0.34527 ...
, 0.013441 0.23682 -0.16899 0.40951 0.63812 ...
. 0.15164 0.30177 -0.16763 0.17684 0.31719 ...</code></pre>

            <h2><span class="emoji">üîß</span> Customization</h2>

            <ul>
                <li><strong>Adjust similarity threshold</strong>: In <code>lib.rs</code>, modify the similarity threshold (currently 0.5) to make the translator more or less strict</li>
                <li><strong>Add more emojis</strong>: Add entries to the <code>emoji.json</code> file</li>
                <li><strong>Use different embeddings</strong>: Replace <code>glove.txt</code> with different word embeddings and update the loading logic if needed</li>
            </ul>

            <h2><span class="emoji">ü§ù</span> Contributing</h2>

            <p>Contributions are welcome! Feel free to:</p>

            <ol>
                <li>Fork the repository</li>
                <li>Create a feature branch (<code>git checkout -b feature/amazing-feature</code>)</li>
                <li>Commit your changes (<code>git commit -m 'Add amazing feature'</code>)</li>
                <li>Push to the branch (<code>git push origin feature/amazing-feature</code>)</li>
                <li>Open a Pull Request</li>
            </ol>

            <h2><span class="emoji">üìÑ</span> License</h2>

            <p>This project is licensed under the MIT License - see the LICENSE file for details.</p>

            <h2><span class="emoji">üôè</span> Acknowledgments</h2>

            <ul>
                <li><a href="https://nlp.stanford.edu/projects/glove/" target="_blank">GloVe</a> for the word embeddings</li>
                <li><a href="https://github.com/muan/emojilib" target="_blank">emojilib</a> by <a href="https://github.com/muan" target="_blank">@muan</a> for the emoji keyword data</li>
                <li><a href="https://github.com/rustwasm" target="_blank">Rust WebAssembly Working Group</a> for <code>wasm-bindgen</code> and related tools</li>
                <li>All emoji creators and standardization committees!</li>
            </ul>
        </div>
    </div>

    <script type="module">

        import init, { EmojiTranslator, initialize } from './emoji_site.js';

        let translator = null;
        let loadingElement = document.getElementById('loading');
        let translatorElement = document.getElementById('translator');
        let progressBar = document.getElementById('progress-bar');

        async function loadData(url) {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Failed to load ${url}: ${response.status} ${response.statusText}`);
            }
            return await response.text();
        }

        async function initializeApp() {
            try {
                setProgress(10);
                console.log("Starting initialization...");

                await init();
                setProgress(30);
                console.log("WASM module loaded");

                console.log("Loading GloVe embeddings...");
                const gloveData = await loadData('static/glove.txt');
                console.log("GloVe embeddings loaded, length:", gloveData.length);
                setProgress(70);

                console.log("Loading emoji data...");
                const emojiData = await loadData('static/emoji.json');
                console.log("Emoji data loaded, length:", emojiData.length);
                setProgress(90);

                translator = new EmojiTranslator();
                translator.initialize(gloveData, emojiData);
                setProgress(100);
                console.log("Translator initialized");

                setTimeout(() => {
                    loadingElement.style.display = 'none';
                    translatorElement.style.display = 'block';
                }, 500);

                setupEventListeners();

            } catch (error) {
                console.error("Error initializing application:", error);
                loadingElement.innerHTML = `
                    <div class="translator-title">Error Loading</div>
                    <div class="status-text">There was a problem loading the necessary data: ${error.message}</div>
                    <div class="status-text">Please refresh the page to try again.</div>
                `;
            }
        }

        function setupEventListeners() {
            document.getElementById('translate-btn').addEventListener('click', translateText);
            document.getElementById('input-text').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    translateText();
                }
            });
        }

        function setProgress(percent) {
            progressBar.style.width = percent + "%";
        }

        function translateText() {
            const inputText = document.getElementById('input-text').value;
            const outputElement = document.getElementById('output');

            if (inputText.trim() === '') {
                outputElement.textContent = 'Please enter some text to translate ü§î';
                return;
            }

            try {
                const translatedText = translator.translate_text(inputText);
                outputElement.textContent = translatedText;
            } catch (error) {
                console.error("Translation error:", error);
                outputElement.textContent = `Error during translation: ${error.message} ‚ùå`;
            }
        }

        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>
